{{>_header}}
<div class="container">
    <div class=" mb-3 btn-group d-flex justify-content-center" role="group"
        aria-label="Basic checkbox toggle button group">


        <button class="btn btn-outline-primary" id="newBtn" type="button">New</button>

    </div>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">id</th>
                <th scope="col">image</th>
                <th scope="col">Name</th>
                <th scope="col">description</th>
                <th scope="col">brand url</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{#each data}}
            <tr>
                <td> {{this.id}}</td>
                <td class=""> <img src="/img/{{{this.image_file}}}" alt="" style="height: 3rem;width:3rem;"> </td>
                <td> {{this.name}} </td>
                <td> {{this.description}} </td>
                <td> {{this.brand_url}} </td>
                <td>
                    <a class="fa fa-trash mx-2 deleteBtn" data-id="{{this.id}}">
                    </a>

                    <a data-id="{{this.id}}" class="fa fa-edit mx-2 editBtn"></a>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>

</div>

<script>


    $("#newBtn").click(function () {
        $.ajax({

            url: '/admin/influencer/create',

        })
            .done(function (response) {
                $("#actionContainer").html(response);

                focusAction("actionContainer");
            })
            .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Fail")
            });
    });



    $(".editBtn").click(function () {
        $.ajax({

            url: '/admin/influencer/edit',
            data: {
                ID: $(this).attr('data-id')
            }

        })
            .done(function (response) {
                $("#actionContainer").html(response);

                focusAction("actionContainer");
            })
            .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Fail")
            });
    });

    
    $(".deleteBtn").click(function () {
        swal({
            title: "Confirm?",
            text: "Are You Want To Delete This Product!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
 

                    $.ajax({
                        type: 'Post',
                        url: '/api/delete/',
                        data: {
                            ID: $(this).attr('data-id'),
                        }
                        

                    })
                        .done(function (response) {
                            $("#tableContainer").html(response);

                            swal("Record Deleted Successfully", {
                                icon: "success",
                            });

                        })
                        .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                            alert("Fail")
                        });

                }
            });


    });

</script>